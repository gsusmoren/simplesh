{
  "setup": {
    "desc": "B3r2",
    "shell": "simplesh",
    "prompt": "gsus@.*> ",
    "timeout": 6,
    "cmds": [
      "dd if=/dev/urandom of=bytes bs=4k count=16k",
      "cp bytes morebytes",
      "cp bytes evenmorebytes",
      "(for l in $(seq 1 1000); do echo linea$l; done) > lineas"
    ]
  },
  "tests": [
    {
      "cmd": "( echo 0; echo 1) | tee splitme | psplit -l 1 ; wc -c stdin0 stdin1 ; cat stdin0 ; cat stdin1 ; cat stdin0 stdin1 > splitmecopy ; diff splitme splitmecopy ; rm -f splitme splitmecopy",
      "out": "^2 stdin0\\r\\n2 stdin1\\r\\n4 total\\r\\n0\\r\\n1\\r\\n$"
    },
    {
      "cmd": "( echo 0; echo 1) | tee splitme | psplit -b 1 -s 10 ; wc -c stdin0 stdin1 stdin2 stdin3 ; cat stdin0 stdin1 stdin2 stdin3 ; cat stdin0 stdin1 stdin2 stdin3 > splitmecopy ; diff splitme splitmecopy ; rm -f splitme splitmecopy",
      "out": "^1 stdin0\\r\\n1 stdin1\\r\\n1 stdin2\\r\\n1 stdin3\\r\\n4 total\\r\\n0\\r\\n1\\r\\n$"
    },
    {
      "cmd": "( echo 0; echo 1) | tee splitme | psplit -b 1 -s  1 ; wc -c stdin0 stdin1 stdin2 stdin3 ; cat stdin0 stdin1 stdin2 stdin3 ; cat stdin0 stdin1 stdin2 stdin3 > splitmecopy ; diff splitme splitmecopy ; rm -f splitme splitmecopy",
      "out": "^1 stdin0\\r\\n1 stdin1\\r\\n1 stdin2\\r\\n1 stdin3\\r\\n4 total\\r\\n0\\r\\n1\\r\\n$"
    }
  ]
}
